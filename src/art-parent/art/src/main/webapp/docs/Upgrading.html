<!doctype html>
<html>
 <head> 
  <meta charset="UTF-8"> 
  <meta name="pdfTitle" content="Upgrading ART"> 
  <title>ART - Upgrading</title> 
  <link rel="shortcut icon" href="../images/favicon.ico"> 
  <style type="text/css">
			table
			{
				border-collapse: collapse; /* 'cellspacing=0' equivalent */
			}

			table td, table th
			{
				padding: 5px; /* 'cellpadding' equivalent */
			}
		</style> 
 </head> 
 <body class="wiki-Tips" id="forge"> 
  <div> 
   <p><strong>Upgrading ART</strong></p> 
  </div> 
  <div class="markdown_content">
   <div class="toc"> 
    <ol> 
     <li><a href="#upgrading-art">Upgrading ART</a></li> 
     <li><a href="#notes">Notes</a> 
      <ol> 
       <li><a href="#30">3.0</a></li> 
      </ol></li> 
    </ol> 
   </div> 
   <h1 id="upgrading-art">Upgrading ART</h1> 
   <p>Take the following steps to upgrade an existing ART installation to a more current version.</p> 
   <ul> 
    <li>Download the latest ART version</li> 
    <li>Extract the zip package to a temporary location</li> 
    <li>Review the <strong>changelog.txt</strong> file to see what has changed</li> 
    <li>Backup the ART directory contained on the application server </li> 
    <li>Backup the ART database</li> 
    <li>Connect to the ART database and run any database upgrade scripts included in the download package to bring the ART database up to date</li> 
    <li>Deploy the new <strong>art.war</strong> file to the application server. There are a number of ways to do this. You can do the following if using Apache Tomcat. 
     <ul> 
      <li>Stop Tomcat</li> 
      <li>Delete the art directory and art.war file in the <strong>TOMCAT_HOME\webapps</strong> directory</li> 
      <li>Delete ART's Tomcat cache by deleting the art directory in the <strong>TOMCAT_HOME\work\Catalina\localhost</strong> directory</li> 
      <li>Copy the new art.war file to the webapps directory</li> 
      <li>Start Tomcat </li> 
     </ul> </li> 
    <li>Copy the contents of the backup <strong>art\WEB-INF\work</strong> directory to the new version's work directory</li> 
    <li>Copy the contents of the backup <strong>art\js-templates</strong> directory to the new version's js-templates directory</li> 
    <li>If you had modified the <strong>art\WEB-INF\art-custom-settings.json</strong> file, copy the file from the backup directory to the new version directory</li> 
    <li>If you had modified the <strong>art\WEB-INF\groovy-whitelist.txt</strong> file, copy the file from the backup directory to the new version directory</li> 
    <li>If you were using the demo HSQLDB database, after running the upgrade scripts on the ArtRepositoryDB database in the backup location, copy the updated files to the <strong>art\WEB-INF\hsqldb</strong> directory of the new version, overwriting the existing files. You can look at the <a class="" href="https://sourceforge.net/p/art/wiki/Tips/">Tips</a> documentation to see how you can upgrade an HSQLDB database.</li> 
    <li>If you had put any <strong>JDBC drivers</strong> in the <strong>art\WEB-INF\lib</strong> directory, copy these drivers from the backup lib directory to the new version's lib directory.</li> 
    <li>Restart Tomcat</li> 
    <li>Clear your browser's cache e.g. for Firefox, use the History | Clear Recent History menu</li> 
   </ul> 
   <p>The upgrade is complete. All users, reports, scheduled jobs etc should continue to work as before.</p> 
   <h1 id="notes">Notes</h1> 
   <p>Some upgrades may require special attention or additional effort due to feature changes and incompatibilities with previous versions.</p> 
   <h2 id="30">3.0</h2> 
   <p>ART 3.0 is a major upgrade and may require extensive testing to verify that it continues to fulfill the needs of an existing installation.</p> 
   <table border="1"> 
    <thead> 
     <tr> 
      <th>Item</th> 
      <th>Comments</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr> 
      <td><strong>URL changes</strong></td> 
      <td>URLs that were being used in bookmarks or other links will need updating. Review the new application to see the appropriate URL to use or look at the admin manual to see new URLs.</td> 
     </tr> 
     <tr> 
      <td><strong>ART Database configuration</strong></td> 
      <td>The details of the ART Database will need to be entered afresh</td> 
     </tr> 
     <tr> 
      <td><strong>Settings</strong></td> 
      <td>Application settings will need to be entered afresh</td> 
     </tr> 
     <tr> 
      <td><strong>Internet Explorer</strong></td> 
      <td>If using Internet Explorer, you will need to use version 8 at a minimum. Some features may not work with Internet Explorer 8 so it is recommended, if using Internet Explorer, to use the latest version.</td> 
     </tr> 
     <tr> 
      <td><strong>Java</strong></td> 
      <td>Java 7 and above is required</td> 
     </tr> 
     <tr> 
      <td><strong>Application server</strong></td> 
      <td>An application server that supports servlet 3.0 will be required e.g. Tomcat 7 and above</td> 
     </tr> 
     <tr> 
      <td><strong>Renamed concepts</strong></td> 
      <td>Some concepts have been renamed e.g. "Queries" are now "Reports", "Graphs" are now "Charts", "View Modes" are now "Report Formats", "Report on Column" report types are now "Group" reports, "Pivot Table" report types are now "JPivot" reports.</td> 
     </tr> 
     <tr> 
      <td><strong>jXLS templates</strong></td> 
      <td>jXLS templates need to be recreated. Review the sample templates located in the <strong>ART_HOME\WEB-INF\work\templates</strong> directory, or the jXLS website, <a href="http://jxls.sourceforge.net/">http://jxls.sourceforge.net/</a>, to see the new template structure.</td> 
     </tr> 
     <tr> 
      <td><strong>Chained parameters</strong></td> 
      <td>Reports that use chained parameters will need to be modified. Review the chained parameter example in the demo database or the admin manual to see the new method of specifying chained parameters.</td> 
     </tr> 
     <tr> 
      <td><strong>Directory location changes</strong></td> 
      <td>The templates directory has been moved to <strong>ART_HOME\WEB-INF\work\templates</strong>. The export directory has been moved to <strong>ART_HOME\WEB-INF\work\export</strong>.</td> 
     </tr> 
     <tr> 
      <td><strong>XMLA Repors</strong></td> 
      <td>For Mondrian XMLA and Microsoft XMLA reports, the url, username and password fields have been removed from the report definition page and instead a datasource needs to be created from the Datasource Configuration page and then used by selecting the Datasource field in the report definition.</td> 
     </tr> 
     <tr> 
      <td><strong>Query tags</strong></td> 
      <td>The special hardcoded tags or placeholders than can be used within query sql, <strong>:USERNAME</strong>, <strong>:DATE</strong> and <strong>:TIME</strong> have been changed to include a colon at the end i.e. <strong>:USERNAME:</strong>, <strong>:DATE:</strong> and <strong>:TIME:</strong></td> 
     </tr> 
     <tr> 
      <td><strong>Dashboard XML</strong></td> 
      <td>If you have xml special characters within tag content, ensure to replace them with the relevant xml character entities e.g. if the <code>&lt;URL&gt;</code> tag contains a url like <code>http://localhost:8080/art/app/runReport.do?reportId=1&amp;p-param1=test</code>, you'll need to replace the <code>&amp;</code> character with <code>&amp;amp;</code>, to have the url as <code>http://localhost:8080/art/app/runReport.do?reportId=1&amp;amp;p-param1=test</code>. For a list of the 5 special xml characters and their respective replacement strings or character entities, see <a href="http://support.esri.com/technical-article/000005870" rel="nofollow">http://support.esri.com/technical-article/000005870</a></td> 
     </tr> 
     <tr> 
      <td><strong>LOOKUP rule values</strong></td> 
      <td>If you had any rule values of type <strong>LOOKUP</strong>, these will no longer be in effect as there is no longer an option for lookup rule values. Instead, define a user group, assign rule values to this user group and put the required users into this user group.</td> 
     </tr> 
     <tr> 
      <td><strong>Non-labelled multi parameters</strong></td> 
      <td>For reports that use multi parameters where the parameter name is not included in the sql source e.g. <code>... IN(#param#)</code>, the reports will need to be updated to include the parameter placeholder in the sql source.</td> 
     </tr> 
     <tr> 
      <td><strong>Non-labelled rules</strong></td> 
      <td>For reports that use rules, if the <code>#rules#</code> label doesn't exist in the sql source, such reports will need to be updated to include this label, so that rules can be applied.</td> 
     </tr> 
     <tr> 
      <td><strong>Dynamic datasources</strong></td> 
      <td>Dynamic datasources must now use the Datasource ID as the value to pass to the parameter. If using an LOV report to provide the dynamic datasource list, the first column must be the datasource ID. If using a static lov this may look something like `3</td> 
     </tr> 
     <tr> 
      <td><strong>Long parameters in JasperReports</strong></td> 
      <td>Parameters that were defined with a data type of <code>java.lang.Long</code> in JasperReports need to be modified to <code>java.lang.Integer</code></td> 
     </tr> 
    </tbody> 
   </table> 
  </div>  
 </body>
</html>