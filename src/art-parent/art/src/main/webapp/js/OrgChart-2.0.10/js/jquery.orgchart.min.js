"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});if("undefined"!=typeof MutationObserver){var o=new MutationObserver(function(e){o.disconnect();e:for(var t=0;t<e.length;t++)for(var n=0;n<e[t].addedNodes.length;n++)if(e[t].addedNodes[n].classList.contains("orgchart")&&i.options.initCompleted&&"function"==typeof i.options.initCompleted){i.options.initCompleted(a),a.triggerHandler({type:"init.orgchart"});break e}});o.observe(n[0],{childList:!0})}if("object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length){var d=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),i.export()}});n.append(d)}return this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var o=a.split(",");-1===a.indexOf("3d")?(n=parseInt(o[4]),s=parseInt(o[5])):(n=parseInt(o[12]),s=parseInt(o[13]))}var d=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)d=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else d=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-d,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-d,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",o=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(o=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(o=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t[0].id&&(n.id=t[0].id),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){return void 0===this.$chart?"Error: orgchart does not exist":this.$chart.find(".node").length?this.$chart.find(".node")[0].id?this.loopChart(this.$chart):"Error: Nodes of orghcart to be exported must have id attribute!":"Error: nodes do not exist"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e),t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.visibleNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.visibleNodes.closest("table").closest("tr").prevAll(".lines").removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{visibleNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildren:function(e){var t=this,i=e.closest("tr").siblings(),n=!!i.is(".verticalNodes")?i.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):i.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(n.get(0)),n.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",function(){n.removeClass("sliding"),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",function(){e(this).removeClass("sliding")})}var o=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(o.get(0)),o.addClass("sliding").removeClass("slide-left slide-right"),o.eq(0).one("transitionend",{node:t,visibleNodes:o},this.showSiblingsEnd.bind(this))},startLoading:function(t,i,n){var s=i.closest(".orgchart");return(void 0===s.data("inAjax")||!0!==s.data("inAjax"))&&(t.addClass("hidden"),i.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),i.children().not(".spinner").css("opacity",.2),s.data("inAjax",!0),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t,i,n){var s=i.closest("div.orgchart");t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),s.data("inAjax",!1),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},createNode:function(n,s,a){var o=this;n.children||(n.children=[]),e.each(n.children,function(e,t){t.parentId=n.id});var d=e.Deferred(),r=e("<div"+(a.draggable?' draggable="true"':"")+(n[a.nodeId]?' id="'+n[a.nodeId]+'"':"")+(n.parentId?' data-parent="'+n.parentId+'"':"")+">").addClass("node "+(n.className||"")+(s>=a.depth?" slide-up":""));a.nodeTemplate?r.append(a.nodeTemplate(n)):r.append('<div class="title">'+n[a.nodeTitle]+"</div>").append(void 0!==a.nodeContent?'<div class="content">'+(n[a.nodeContent]||"")+"</div>":"");var l=n.relationship||"";if(a.verticalDepth&&s+2>a.verticalDepth){if(s+1>=a.verticalDepth&&Number(l.substr(2,1))){var c=s+1>=a.depth?"plus":"minus";r.append('<i class="toggleBtn fa fa-'+c+'-square"></i>')}}else Number(l.substr(0,1))&&r.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(l.substr(1,1))&&r.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(l.substr(2,1))&&r.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+a.parentNodeSymbol+' symbol"></i>');return r.on("mouseenter mouseleave",function(t){var i=e(this),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=o.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=o.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&o.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")}),r.on("click",function(t){e(this).closest(".orgchart").find(".focused").removeClass("focused"),e(this).addClass("focused")}),r.on("click",".topEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),d=o.getNodeState(s,"parent");if(d.exist){var r=s.closest("table").closest("tr").siblings(":first").find(".node");if(r.is(".sliding"))return;d.visible?(o.hideParent(s),r.one("transitionend",function(){o.isInAction(s)&&(o.switchVerticalArrow(i),o.switchHorizontalArrow(s))})):o.showParent(s)}else{var l=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.parent)?a.ajaxURL.parent(n):a.ajaxURL.parent+l,dataType:"json"}).done(function(t){s.closest(".orgchart").data("inAjax")&&(e.isEmptyObject(t)||o.addParent(s,t,a))}).fail(function(){console.log("Failed to get parent node data")}).always(function(){o.endLoading(i,s,a)})}}),r.on("click",".bottomEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),d=o.getNodeState(s,"children");if(d.exist){if(s.closest("tr").siblings(":last").find(".sliding").length)return;d.visible?o.hideChildren(s):o.showChildren(s)}else{var r=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(n):a.ajaxURL.children+r,dataType:"json"}).done(function(t,i,n){s.closest(".orgchart").data("inAjax")&&t.children.length&&o.addChildren(s,t,e.extend({},a,{depth:0}))}).fail(function(e,t,i){console.log("Failed to get children nodes data")}).always(function(){o.endLoading(i,s,a)})}}),r.on("click",".toggleBtn",function(t){var i=e(this),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),o.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",function(){a.removeClass("sliding")})):(s.addClass("sliding slide-up").eq(0).one("transitionend",function(){s.removeClass("sliding"),s.closest("ul").addClass("hidden")}),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))}),r.on("click",".leftEdge, .rightEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),d=o.getNodeState(s,"siblings");if(d.exist){if(s.closest("table").parent().siblings().find(".sliding").length)return;if(a.toggleSiblingsResp){var r=s.closest("table").parent().prev(),l=s.closest("table").parent().next();i.is(".leftEdge")?r.is(".hidden")?o.showSiblings(s,"left"):o.hideSiblings(s,"left"):l.is(".hidden")?o.showSiblings(s,"right"):o.hideSiblings(s,"right")}else d.visible?o.hideSiblings(s):o.showSiblings(s)}else{var c=i.parent()[0].id,h=o.getNodeState(s,"parent").exist?e.isFunction(a.ajaxURL.siblings)?a.ajaxURL.siblings(n):a.ajaxURL.siblings+c:e.isFunction(a.ajaxURL.families)?a.ajaxURL.families(n):a.ajaxURL.families+c;o.startLoading(i,s,a)&&e.ajax({url:h,dataType:"json"}).done(function(e,t,i){s.closest(".orgchart").data("inAjax")&&(e.siblings||e.children)&&o.addSiblings(s,e,a)}).fail(function(e,t,i){console.log("Failed to get sibling nodes data")}).always(function(){o.endLoading(i,s,a)})}}),a.draggable&&r.on("dragstart",function(n){var s=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());if(o&&s.dataTransfer.setData("text/html","hack for firefox"),"none"!==r.closest(".orgchart").css("transform")){var d,l;i.querySelector(".ghost-node")?(d=r.closest(".orgchart").children(".ghost-node").get(0),l=e(d).children().get(0)):((d=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(l),r.closest(".orgchart").append(d));var c=r.closest(".orgchart").css("transform").split(","),h=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?c[0].slice(c[0].indexOf("(")+1):c[1]));d.setAttribute("width",r.outerWidth(!1)),d.setAttribute("height",r.outerHeight(!1)),l.setAttribute("x",5*h),l.setAttribute("y",5*h),l.setAttribute("width",120*h),l.setAttribute("height",40*h),l.setAttribute("rx",4*h),l.setAttribute("ry",4*h),l.setAttribute("stroke-width",1*h);var g=s.offsetX*h,f=s.offsetY*h;if("l2r"===a.direction?(g=s.offsetY*h,f=s.offsetX*h):"r2l"===a.direction?(g=r.outerWidth(!1)-s.offsetY*h,f=s.offsetX*h):"b2t"===a.direction&&(g=r.outerWidth(!1)-s.offsetX*h,f=r.outerHeight(!1)-s.offsetY*h),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var p=i.createElement("img");p.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(d),s.dataTransfer.setDragImage(p,g,f)}else s.dataTransfer.setDragImage(d,g,f)}var v=e(this),u=v.closest(".nodes").siblings().eq(0).find(".node:first"),b=v.closest("table").find(".node");v.closest(".orgchart").data("dragged",v).find(".node").each(function(t,i){-1===b.index(i)&&(a.dropCriteria?a.dropCriteria(v,u,e(i))&&e(i).addClass("allowedDrop"):e(i).addClass("allowedDrop"))})}).on("dragover",function(t){t.preventDefault(),e(this).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(t){e(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(t){var i=e(this),n=i.closest(".orgchart"),s=n.data("dragged"),a=s.closest(".nodes").siblings().eq(0).children(),o=e.Event("nodedrop.orgchart");if(n.trigger(o,{draggedNode:s,dragZone:a.children(),dropZone:i}),!o.isDefaultPrevented()){if(i.closest("tr").siblings().length){var d=parseInt(i.parent().attr("colspan"))+2,r='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",d),s.find(".horizontalEdge").length||s.append(r),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>').end().next().append(s.closest("table").parent());var l=s.closest("table").parent().siblings().find(".node:first");1===l.length&&l.append(r)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(s.find(".horizontalEdge").remove().end().closest("table").parent());var c=parseInt(a.attr("colspan"));if(c>2){a.attr("colspan",c-2).parent().next().children().attr("colspan",c-2).end().next().children().slice(1,3).remove();var h=a.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}}),a.createNode&&a.createNode(r,n),d.resolve(r),d.promise()},buildHierarchy:function(t,i,n,s,a){var o,d=this,r=i.children,l=!!r&&r.length,c=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(o=c?t:e("<table>"),c||t.append(o),e.when(this.createNode(i,n,s)).done(function(e){c?o.append(e):o.append(e.wrap("<tr><td"+(l?' colspan="'+2*r.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(o=t);var h=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||o.append('<tr class="lines'+h+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var f='<tr class="lines'+h+'"><td class="rightLine">&nbsp;</td>',p=1;p<r.length;p++)f+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';f+='<td class="leftLine">&nbsp;</td></tr>';var v;g?(v=e("<ul>"),h&&v.addClass(h),n+2===s.verticalDepth?o.append('<tr class="verticalNodes'+h+'"><td></td></tr>').find(".verticalNodes").children().append(v):o.append(v)):(v=e('<tr class="nodes'+h+'">'),o.append(f).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),d.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,o=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(e){o.append(e.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),o.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');o.append('<tr class="lines hidden"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr>');var t=a.$chart;t.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(t.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),o=i.siblings?i.siblings.length:i.children.length,d=t.parent().is("td")?t.closest("tr").children().length:1,r=d+o,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var c=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++c===o){var e=t.parent().closest("table").children("tr:last").children("td");d>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,d),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var h=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++h===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var o=this.$chartContainer,d=o.find(".mask");d.length?d.removeClass("hidden"):o.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=o.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(o.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var d={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(d=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),d.save(n+".pdf")}else{var c="WebkitAppearance"in i.documentElement.style,h=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!c&&!h||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var f=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");o.find(f).length||o.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),o.find(f).attr("href",e.toDataURL())[0].click()}}}}).then(function(){o.removeClass("canvasContainer")},function(){o.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2pxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsIm1vIiwibXV0YXRpb25zIiwiZGlzY29ubmVjdCIsImluaXRUaW1lIiwiaSIsImoiLCJhZGRlZE5vZGVzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbml0Q29tcGxldGVkIiwidHJpZ2dlckhhbmRsZXIiLCJ0eXBlIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsImJ1aWxkSGllcmFyY2h5IiwiYnVpbGRKc29uRFMiLCJjaGlsZHJlbiIsImFqYXhVUkwiLCJhdHRhY2hSZWwiLCJhcHBlbmQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwidGV4dFN0YXR1cyIsImpxWEhSIiwiZmFpbCIsImVycm9yVGhyb3duIiwiY29uc29sZSIsImxvZyIsImFsd2F5cyIsIiRleHBvcnRCdG4iLCJ0ZXh0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiZXhwb3J0IiwiYmluZFBhbiIsImJpbmRab29tIiwic2V0T3B0aW9ucyIsInZhbCIsInVuYmluZFBhbiIsInVuYmluZFpvb20iLCJwYW5TdGFydEhhbmRsZXIiLCJkZWxlZ2F0ZVRhcmdldCIsInRvdWNoZXMiLCJjc3MiLCJsYXN0WCIsImxhc3RZIiwibGFzdFRmIiwidGVtcCIsInNwbGl0IiwiaW5kZXhPZiIsInBhcnNlSW50Iiwic3RhcnRYIiwic3RhcnRZIiwidGFyZ2V0VG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJvbiIsIm5ld1giLCJuZXdZIiwibWF0cml4Iiwiam9pbiIsInBhbkVuZEhhbmRsZXIiLCJjaGFydCIsIm9mZiIsInpvb21XaGVlbEhhbmRsZXIiLCJvYyIsIm5ld1NjYWxlIiwib3JpZ2luYWxFdmVudCIsImRlbHRhWSIsInNldENoYXJ0U2NhbGUiLCJ6b29tU3RhcnRIYW5kbGVyIiwiZGlzdCIsImdldFBpbmNoRGlzdCIsInpvb21pbmdIYW5kbGVyIiwiem9vbUVuZEhhbmRsZXIiLCJkaWZmIiwiTWF0aCIsInNxcnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRhcmdldFNjYWxlIiwiYWJzIiwicGFyc2VGbG9hdCIsIiRsaSIsInN1Yk9iaiIsIm5hbWUiLCJjb250ZW50cyIsImVxIiwidHJpbSIsInJlbGF0aW9uc2hpcCIsInBhcmVudCIsImlzIiwic2libGluZ3MiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsImdldE5vZGVTdGF0ZSIsIiRub2RlIiwicmVsYXRpb24iLCIkdGFyZ2V0IiwiZXhpc3QiLCJ2aXNpYmxlIiwiZ2V0UmVsYXRlZE5vZGVzIiwiaGlkZVBhcmVudEVuZCIsInVwcGVyTGV2ZWwiLCJhZGRDbGFzcyIsInNsaWNlIiwicmVtb3ZlQXR0ciIsImhpZGVQYXJlbnQiLCIkdXBwZXJMZXZlbCIsImhpZGVTaWJsaW5ncyIsIiRwYXJlbnQiLCJvbmUiLCJzaG93UGFyZW50RW5kIiwibm9kZSIsImlzSW5BY3Rpb24iLCJzd2l0Y2hWZXJ0aWNhbEFycm93Iiwic2hvd1BhcmVudCIsInJlcGFpbnQiLCJiaW5kIiwic3RvcEFqYXgiLCIkbm9kZUxldmVsIiwiaXNWaXNpYmxlTm9kZSIsImluZGV4IiwiaGlkZUNoaWxkcmVuRW5kIiwidmlzaWJsZU5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJsb3dlckxldmVsIiwicHJldkFsbCIsImxhc3QiLCJoaWRlQ2hpbGRyZW4iLCIkbG93ZXJMZXZlbCIsIiR2aXNpYmxlTm9kZXMiLCJmaWx0ZXIiLCJnZXQiLCJzaG93Q2hpbGRyZW4iLCIkbGV2ZWxzIiwiJGRlc2NlbmRhbnRzIiwiaGlkZVNpYmxpbmdzRW5kIiwiJG5vZGVDb250YWluZXIiLCJub2RlQ29udGFpbmVyIiwibGluZXMiLCIkc2libGluZ3MiLCJuZXh0QWxsIiwicHJldiIsImFuaW1hdGVkTm9kZXMiLCJlbmQiLCJzd2l0Y2hIb3Jpem9udGFsQXJyb3ciLCIkYW5pbWF0ZWROb2RlcyIsIiRsaW5lcyIsInNob3dTaWJsaW5nc0VuZCIsInNob3dTaWJsaW5ncyIsInN0YXJ0TG9hZGluZyIsIiRhcnJvdyIsIm5vdCIsInByb3AiLCJlbmRMb2FkaW5nIiwiYXR0ciIsInRvZ2dsZUNsYXNzIiwiJHByZXZTaWIiLCIkbmV4dFNpYiIsIm5leHQiLCIkc2licyIsInNpYnNWaXNpYmxlIiwic3R5bGUiLCJvZmZzZXRXaWR0aCIsImNyZWF0ZU5vZGUiLCJub2RlRGF0YSIsImxldmVsIiwiY2hpbGQiLCJwYXJlbnRJZCIsImR0ZCIsIkRlZmVycmVkIiwiJG5vZGVEaXYiLCJjbGFzc05hbWUiLCJub2RlVGVtcGxhdGUiLCJub2RlQ29udGVudCIsInZlcnRpY2FsRGVwdGgiLCJOdW1iZXIiLCJzdWJzdHIiLCJpY29uIiwicHJlcGVuZCIsImZsYWciLCIkdG9wRWRnZSIsIiRib3R0b21FZGdlIiwiJGxlZnRFZGdlIiwic3RvcFByb3BhZ2F0aW9uIiwiJHRoYXQiLCJwYXJlbnRTdGF0ZSIsImlzRnVuY3Rpb24iLCJpc0VtcHR5T2JqZWN0IiwiYWRkUGFyZW50IiwiY2hpbGRyZW5TdGF0ZSIsImFkZENoaWxkcmVuIiwiJHRoaXMiLCIkZGVzY1dyYXBwZXIiLCIkY2hpbGRyZW4iLCJzaWJsaW5nc1N0YXRlIiwiZmFtaWxpZXMiLCJhZGRTaWJsaW5ncyIsIm9yaWdFdmVudCIsImlzRmlyZWZveCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJnaG9zdE5vZGUiLCJub2RlQ292ZXIiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudE5TIiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJ0cmFuc1ZhbHVlcyIsInNjYWxlIiwic2V0QXR0cmlidXRlIiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwieE9mZnNldCIsIm9mZnNldFgiLCJ5T2Zmc2V0Iiwib2Zmc2V0WSIsImdob3N0Tm9kZVdyYXBwZXIiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwic2V0RHJhZ0ltYWdlIiwiJGRyYWdnZWQiLCIkZHJhZ1pvbmUiLCIkZHJhZ0hpZXIiLCJkcm9wQ3JpdGVyaWEiLCJkcm9wRWZmZWN0IiwiJGRyb3Bab25lIiwiJG9yZ2NoYXJ0IiwiZHJvcEV2ZW50IiwiRXZlbnQiLCJ0cmlnZ2VyIiwiZHJhZ2dlZE5vZGUiLCJkcmFnWm9uZSIsImRyb3Bab25lIiwiaXNEZWZhdWx0UHJldmVudGVkIiwiZHJvcENvbHNwYW4iLCJob3Jpem9udGFsRWRnZXMiLCJhZGRCYWNrIiwiYmVmb3JlIiwiJGRyb3BTaWJzIiwiYWZ0ZXIiLCJkcmFnQ29sc3BhbiIsIiRkcmFnU2licyIsInJlc29sdmUiLCJwcm9taXNlIiwiJGFwcGVuZFRvIiwiY2FsbGJhY2siLCIkbm9kZVdyYXBwZXIiLCIkY2hpbGROb2RlcyIsImhhc0NoaWxkcmVuIiwiaXNWZXJ0aWNhbE5vZGUiLCJPYmplY3QiLCJrZXlzIiwid2hlbiIsIndyYXAiLCJpc0hpZGRlbiIsImNvbGxhcHNlZCIsImlzVmVydGljYWxMYXllciIsImxpbmVMYXllciIsIiRub2RlTGF5ZXIiLCIkbm9kZUNlbGwiLCJidWlsZENoaWxkTm9kZSIsImNvdW50IiwiYnVpbGRQYXJlbnROb2RlIiwiJGN1cnJlbnRSb290IiwiJHRhYmxlIiwiY29tcGxlbWVudExpbmUiLCIkb25lU2libGluZyIsInNpYmxpbmdDb3VudCIsImV4aXN0aW5nU2libGlnQ291bnQiLCJidWlsZFNpYmxpbmdOb2RlIiwiJG5vZGVDaGFydCIsIm5ld1NpYmxpbmdDb3VudCIsImluc2VydFBvc3Rpb24iLCJmbG9vciIsImNoaWxkQ291bnQiLCIkc2libGluZ1RkcyIsInVud3JhcCIsIm5vZGVDb3VudCIsInJlbW92ZU5vZGVzIiwiJG1hc2siLCJzb3VyY2VDaGFydCIsImh0bWwyY2FudmFzIiwid2lkdGgiLCJjbGllbnRIZWlnaHQiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsIm9uY2xvbmUiLCJjbG9uZURvYyIsIm9ucmVuZGVyZWQiLCJjYW52YXMiLCJkb2MiLCJkb2NXaWR0aCIsImRvY0hlaWdodCIsImpzUERGIiwiYWRkSW1hZ2UiLCJ0b0RhdGFVUkwiLCJzYXZlIiwiaXNXZWJraXQiLCJkb2N1bWVudEVsZW1lbnQiLCJpc0ZmIiwic2lkZWJhciIsImlzRWRnZSIsImFwcE5hbWUiLCJhcHBWZXJzaW9uIiwibXNTYXZlQmxvYiIsIm1zVG9CbG9iIiwic2VsZWN0b3IiLCJ0aGVuIiwiZm4iLCJvcmdjaGFydCJdLCJtYXBwaW5ncyI6IkFBVUEsY0FFQyxTQUFVQSxHQUNhLGlCQUFYQyxRQUFpRCxpQkFBbkJBLE9BQU9DLFFBQzlDRixFQUFRRyxRQUFRLFVBQVdDLE9BQVFDLFVBRW5DTCxFQUFRTSxPQUFRRixPQUFRQyxVQUo1QixDQU1FLFNBQVVFLEVBQUdILEVBQVFDLEVBQVVHLEdBQy9CLElBQUlDLEVBQVcsU0FBVUMsRUFB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QUssV0FDSnRXLEVBQWdCZ0MsWUFBWSxvQkFDM0IsV0FDRGhDLEVBQWdCZ0MsWUFBWSx1QkFLbEN0QyxFQUFFNlcsR0FBR0MsU0FBVyxTQUFVMVcsR0FDeEIsT0FBTyxJQUFJRixFQUFTRyxLQUFNRCxHQUFNb0IiLCJmaWxlIjoianF1ZXJ5Lm9yZ2NoYXJ0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBqUXVlcnkgT3JnQ2hhcnQgUGx1Z2luXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nL09yZ0NoYXJ0XG4gKlxuICogQ29weXJpZ2h0IDIwMTYsIGRhYmVuZ1xuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSwgd2luZG93LCBkb2N1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuICB9XG59KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcbiAgdmFyIE9yZ0NoYXJ0ID0gZnVuY3Rpb24gKGVsZW0sIG9wdHMpIHtcbiAgICB0aGlzLiRjaGFydENvbnRhaW5lciA9ICQoZWxlbSk7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLmRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgJ25vZGVUaXRsZSc6ICduYW1lJyxcbiAgICAgICdub2RlSWQnOiAnaWQnLFxuICAgICAgJ3RvZ2dsZVNpYmxpbmdzUmVzcCc6IGZhbHNlLFxuICAgICAgJ2RlcHRoJzogOTk5LFxuICAgICAgJ2NoYXJ0Q2xhc3MnOiAnJyxcbiAgICAgICdleHBvcnRCdXR0b24nOiBmYWxzZSxcbiAgICAgICdleHBvcnRGaWxlbmFtZSc6ICdPcmdDaGFydCcsXG4gICAgICAnZXhwb3J0RmlsZWV4dGVuc2lvbic6ICdwbmcnLFxuICAgICAgJ3BhcmVudE5vZGVTeW1ib2wnOiAnZmEtdXNlcnMnLFxuICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxuICAgICAgJ2RpcmVjdGlvbic6ICd0MmInLFxuICAgICAgJ3Bhbic6IGZhbHNlLFxuICAgICAgJ3pvb20nOiBmYWxzZSxcbiAgICAgICd6b29taW5MaW1pdCc6IDcsXG4gICAgICAnem9vbW91dExpbWl0JzogMC41XG4gICAgfTtcbiAgfTtcbiAgLy9cbiAgT3JnQ2hhcnQucHJvdG90eXBlID0ge1xuICAgIC8vXG4gICAgaW5pdDogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCB0aGlzLm9wdHMsIG9wdHMpO1xuICAgICAgLy8gYnVpbGQgdGhlIG9yZy1jaGFydFxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xuICAgICAgaWYgKHRoaXMuJGNoYXJ0KSB7XG4gICAgICAgIHRoaXMuJGNoYXJ0LnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgdmFyIGRhdGEgPSB0aGlzLm9wdGlvbnMuZGF0YTtcbiAgICAgIHZhciAkY2hhcnQgPSB0aGlzLiRjaGFydCA9ICQoJzxkaXY+Jywge1xuICAgICAgICAnZGF0YSc6IHsgJ29wdGlvbnMnOiB0aGlzLm9wdGlvbnMgfSxcbiAgICAgICAgJ2NsYXNzJzogJ29yZ2NoYXJ0JyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uICE9PSAndDJiJyA/ICcgJyArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gOiAnJyksXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKCEkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRjaGFydC5maW5kKCcubm9kZS5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG4gICAgICAgICAgbW8uZGlzY29ubmVjdCgpO1xuICAgICAgICAgIGluaXRUaW1lOlxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGlmIChtdXRhdGlvbnNbaV0uYWRkZWROb2Rlc1tqXS5jbGFzc0xpc3QuY29udGFpbnMoJ29yZ2NoYXJ0JykpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgJiYgdHlwZW9mIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCgkY2hhcnQpO1xuICAgICAgICAgICAgICAgICAgJGNoYXJ0LnRyaWdnZXJIYW5kbGVyKHsgJ3R5cGUnOiAnaW5pdC5vcmdjaGFydCcgfSk7XG4gICAgICAgICAgICAgICAgICBicmVhayBpbml0VGltZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgbW8ub2JzZXJ2ZSgkY2hhcnRDb250YWluZXJbMF0sIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCQudHlwZShkYXRhKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiAkKSB7IC8vIHVsIGRhdGFzb3VyY2VcbiAgICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhpcy5idWlsZEpzb25EUyhkYXRhLmNoaWxkcmVuKCkpLCAwLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgeyAvLyBsb2NhbCBqc29uIGRhdGFzb3VyY2VcbiAgICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhpcy5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhpcy5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRjaGFydC5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPicpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICd1cmwnOiBkYXRhLFxuICAgICAgICAgICdkYXRhVHlwZSc6ICdqc29uJ1xuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGF0Lm9wdGlvbnMuYWpheFVSTCA/IGRhdGEgOiB0aGF0LmF0dGFjaFJlbChkYXRhLCAnMDAnKSwgMCwgdGhhdC5vcHRpb25zKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuICAgICAgICB9KVxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRjaGFydC5jaGlsZHJlbignLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCRjaGFydCk7XG5cbiAgICAgIC8vIGFwcGVuZCB0aGUgZXhwb3J0IGJ1dHRvblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHBvcnRCdXR0b24gJiYgISRjaGFydENvbnRhaW5lci5maW5kKCcub2MtZXhwb3J0LWJ0bicpLmxlbmd0aCkge1xuICAgICAgICB2YXIgJGV4cG9ydEJ0biA9ICQoJzxidXR0b24+Jywge1xuICAgICAgICAgICdjbGFzcyc6ICdvYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSxcbiAgICAgICAgICAndGV4dCc6ICdFeHBvcnQnLFxuICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoYXQuZXhwb3J0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkZXhwb3J0QnRuKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYW4pIHtcbiAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuem9vbSkge1xuICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiAob3B0cywgdmFsKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChvcHRzID09PSAncGFuJykge1xuICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cyA9PT0gJ3pvb20nKSB7XG4gICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuYmluZFpvb20oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKG9wdHMuZGF0YSkge1xuICAgICAgICAgIHRoaXMuaW5pdChvcHRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMucGFuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKG9wdHMucGFuKSB7XG4gICAgICAgICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy51bmJpbmRQYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLnpvb20gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAob3B0cy56b29tKSB7XG4gICAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vXG4gICAgcGFuU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyICRjaGFydCA9ICQoZS5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICBpZiAoJChlLnRhcmdldCkuY2xvc2VzdCgnLm5vZGUnKS5sZW5ndGggfHwgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID4gMSkpIHtcbiAgICAgICAgJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnLCBmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRjaGFydC5jc3MoJ2N1cnNvcicsICdtb3ZlJykuZGF0YSgncGFubmluZycsIHRydWUpO1xuICAgICAgfVxuICAgICAgdmFyIGxhc3RYID0gMDtcbiAgICAgIHZhciBsYXN0WSA9IDA7XG4gICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICBpZiAobGFzdFRmICE9PSAnbm9uZScpIHtcbiAgICAgICAgdmFyIHRlbXAgPSBsYXN0VGYuc3BsaXQoJywnKTtcbiAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFs0XSk7XG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzVdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0WCA9IHBhcnNlSW50KHRlbXBbMTJdKTtcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbMTNdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHN0YXJ0WCA9IDA7XG4gICAgICB2YXIgc3RhcnRZID0gMDtcbiAgICAgIGlmICghZS50YXJnZXRUb3VjaGVzKSB7IC8vIHBhbmQgb24gZGVza3RvcFxuICAgICAgICBzdGFydFggPSBlLnBhZ2VYIC0gbGFzdFg7XG4gICAgICAgIHN0YXJ0WSA9IGUucGFnZVkgLSBsYXN0WTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgICBzdGFydFggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBsYXN0WDtcbiAgICAgICAgc3RhcnRZID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gbGFzdFk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgICRjaGFydC5vbignbW91c2Vtb3ZlIHRvdWNobW92ZScsZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoISRjaGFydC5kYXRhKCdwYW5uaW5nJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1ggPSAwO1xuICAgICAgICB2YXIgbmV3WSA9IDA7XG4gICAgICAgIGlmICghZS50YXJnZXRUb3VjaGVzKSB7IC8vIHBhbmQgb24gZGVza3RvcFxuICAgICAgICAgIG5ld1ggPSBlLnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgICAgIG5ld1kgPSBlLnBhZ2VZIC0gc3RhcnRZO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgICAgICBuZXdYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgICAgIG5ld1kgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBzdGFydFk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnbWF0cml4KDEsIDAsIDAsIDEsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnKScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnbWF0cml4M2QoMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcsIDAsIDEpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcbiAgICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgICBtYXRyaXhbNF0gPSAnICcgKyBuZXdYO1xuICAgICAgICAgICAgbWF0cml4WzVdID0gJyAnICsgbmV3WSArICcpJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0cml4WzEyXSA9ICcgJyArIG5ld1g7XG4gICAgICAgICAgICBtYXRyaXhbMTNdID0gJyAnICsgbmV3WTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbWF0cml4LmpvaW4oJywnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBwYW5FbmRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUuZGF0YS5jaGFydC5kYXRhKCdwYW5uaW5nJykpIHtcbiAgICAgICAgZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnLCBmYWxzZSkuY3NzKCdjdXJzb3InLCAnZGVmYXVsdCcpLm9mZignbW91c2Vtb3ZlJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJpbmRQYW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICB0aGlzLiRjaGFydC5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0aGlzLnBhblN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbignbW91c2V1cCB0b3VjaGVuZCcsIHsgJ2NoYXJ0JzogdGhpcy4kY2hhcnQgfSwgdGhpcy5wYW5FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgdW5iaW5kUGFuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcbiAgICAgIHRoaXMuJGNoYXJ0Lm9mZignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0aGlzLnBhblN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ21vdXNldXAgdG91Y2hlbmQnLCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICB6b29tV2hlZWxIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIG5ld1NjYWxlICA9IDEgKyAoZS5vcmlnaW5hbEV2ZW50LmRlbHRhWSA+IDAgPyAtMC4yIDogMC4yKTtcbiAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCBuZXdTY2FsZSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHpvb21TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZihlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycsIHRydWUpO1xuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdFN0YXJ0JywgZGlzdCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB6b29taW5nSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGlmKG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycpKSB7XG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0RW5kJywgZGlzdCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB6b29tRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGlmKG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycpKSB7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycsIGZhbHNlKTtcbiAgICAgICAgdmFyIGRpZmYgPSBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0RW5kJykgLSBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnKTtcbiAgICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDEuMik7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgMC44KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBiaW5kWm9vbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub24oJ3doZWVsJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbigndG91Y2hzdGFydCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNobW92ZScsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaGVuZCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIHVuYmluZFpvb206IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9mZignd2hlZWwnLCB0aGlzLnpvb21XaGVlbEhhbmRsZXIpO1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd0b3VjaHN0YXJ0JywgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlJywgdGhpcy56b29taW5nSGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ3RvdWNoZW5kJywgdGhpcy56b29tRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIGdldFBpbmNoRGlzdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoKGUudG91Y2hlc1swXS5jbGllbnRYIC0gZS50b3VjaGVzWzFdLmNsaWVudFgpICogKGUudG91Y2hlc1swXS5jbGllbnRYIC0gZS50b3VjaGVzWzFdLmNsaWVudFgpICtcbiAgICAgIChlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGUudG91Y2hlc1sxXS5jbGllbnRZKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGUudG91Y2hlc1sxXS5jbGllbnRZKSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHNldENoYXJ0U2NhbGU6IGZ1bmN0aW9uICgkY2hhcnQsIG5ld1NjYWxlKSB7XG4gICAgICB2YXIgb3B0cyA9ICRjaGFydC5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICB2YXIgbWF0cml4ID0gJyc7XG4gICAgICB2YXIgdGFyZ2V0U2NhbGUgPSAxO1xuICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XG4gICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcbiAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgIHRhcmdldFNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQobWF0cml4WzNdKSAqIG5ld1NjYWxlKTtcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIGxhc3RUZiArICcgc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFsxXSkgKiBuZXdTY2FsZSk7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlM2QoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnLCAxKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBidWlsZEpzb25EUzogZnVuY3Rpb24gKCRsaSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIHN1Yk9iaiA9IHtcbiAgICAgICAgJ25hbWUnOiAkbGkuY29udGVudHMoKS5lcSgwKS50ZXh0KCkudHJpbSgpLFxuICAgICAgICAncmVsYXRpb25zaGlwJzogKCRsaS5wYXJlbnQoKS5wYXJlbnQoKS5pcygnbGknKSA/ICcxJzogJzAnKSArICgkbGkuc2libGluZ3MoJ2xpJykubGVuZ3RoID8gMTogMCkgKyAoJGxpLmNoaWxkcmVuKCd1bCcpLmxlbmd0aCA/IDEgOiAwKVxuICAgICAgfTtcbiAgICAgIGlmICgkbGlbMF0uaWQpIHtcbiAgICAgICAgc3ViT2JqLmlkID0gJGxpWzBdLmlkO1xuICAgICAgfVxuICAgICAgJGxpLmNoaWxkcmVuKCd1bCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhhdC5idWlsZEpzb25EUygkKHRoaXMpKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdWJPYmo7XG4gICAgfSxcbiAgICAvL1xuICAgIGF0dGFjaFJlbDogZnVuY3Rpb24gKGRhdGEsIGZsYWdzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBkYXRhLnJlbGF0aW9uc2hpcCA9IGZsYWdzICsgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwID8gMSA6IDApO1xuICAgICAgaWYgKGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgZGF0YS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICB0aGF0LmF0dGFjaFJlbChpdGVtLCAnMScgKyAoZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8vXG4gICAgbG9vcENoYXJ0OiBmdW5jdGlvbiAoJGNoYXJ0KSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRyID0gJGNoYXJ0LmZpbmQoJ3RyOmZpcnN0Jyk7XG4gICAgICB2YXIgc3ViT2JqID0geyAnaWQnOiAkdHIuZmluZCgnLm5vZGUnKVswXS5pZCB9O1xuICAgICAgJHRyLnNpYmxpbmdzKCc6bGFzdCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhhdC5sb29wQ2hhcnQoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBnZXRIaWVyYXJjaHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy4kY2hhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiAnRXJyb3I6IG9yZ2NoYXJ0IGRvZXMgbm90IGV4aXN0J1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLiRjaGFydC5maW5kKCcubm9kZScpLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiAnRXJyb3I6IG5vZGVzIGRvIG5vdCBleGlzdCdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIXRoaXMuJGNoYXJ0LmZpbmQoJy5ub2RlJylbMF0uaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnRXJyb3I6IE5vZGVzIG9mIG9yZ2hjYXJ0IHRvIGJlIGV4cG9ydGVkIG11c3QgaGF2ZSBpZCBhdHRyaWJ1dGUhJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmxvb3BDaGFydCh0aGlzLiRjaGFydCk7XG4gICAgfSxcbiAgICAvLyBkZXRlY3QgdGhlIGV4aXN0L2Rpc3BsYXkgc3RhdGUgb2YgcmVsYXRlZCBub2RlXG4gICAgZ2V0Tm9kZVN0YXRlOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgICB2YXIgJHRhcmdldCA9IHt9O1xuICAgICAgdmFyIHJlbGF0aW9uID0gcmVsYXRpb24gfHwgJ3NlbGYnO1xuICAgICAgaWYgKHJlbGF0aW9uID09PSAncGFyZW50Jykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoJzpmaXJzdCcpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJHRhcmdldC5pcygnLmhpZGRlbicpIHx8ICghJHRhcmdldC5pcygnLmhpZGRlbicpICYmICR0YXJnZXQuY2xvc2VzdCgnLm5vZGVzJykuaXMoJy5oaWRkZW4nKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpsYXN0Jyk7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJHRhcmdldC5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnc2libGluZ3MnKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJHRhcmdldC5pcygnLmhpZGRlbicpICYmICEkdGFyZ2V0LnBhcmVudCgpLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEoKCR0YXJnZXQuY2xvc2VzdCgnLm5vZGVzJykubGVuZ3RoICYmICR0YXJnZXQuY2xvc2VzdCgnLm5vZGVzJykuaXMoJy5oaWRkZW4nKSkgfHxcbiAgICAgICAgICAgICgkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubGVuZ3RoICYmICR0YXJnZXQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5pcygnLmhpZGRlbicpKSB8fFxuICAgICAgICAgICAgKCR0YXJnZXQucGFyZW50KCkuaXMoJ2xpJykgJiYgKCR0YXJnZXQuY2xvc2VzdCgndWwnKS5pcygnLmhpZGRlbicpIHx8ICR0YXJnZXQuY2xvc2VzdCgndmVydGljYWxOb2RlcycpLmlzKCcuaGlkZGVuJykpKVxuICAgICAgICAgICkpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgfSxcbiAgICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gICAgZ2V0UmVsYXRlZE5vZGVzOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgICBpZiAoISRub2RlIHx8ICEoJG5vZGUgaW5zdGFuY2VvZiAkKSB8fCAhJG5vZGUuaXMoJy5ub2RlJykpIHtcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnBhcmVudCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaGlkZVBhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGV2ZW50LmRhdGEudXBwZXJMZXZlbC5hZGRDbGFzcygnaGlkZGVuJykuc2xpY2UoMSkucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGFuY2VzdG9yIG5vZGUgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZVBhcmVudDogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCR1cHBlckxldmVsLmVxKDApLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXNcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBsaW5lc1xuICAgICAgdmFyICRsaW5lcyA9ICR1cHBlckxldmVsLnNsaWNlKDEpO1xuICAgICAgJGxpbmVzLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIC8vIGhpZGUgdGhlIHN1cGVyaW9yIG5vZGVzIHdpdGggdHJhbnNpdGlvblxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRwYXJlbnQpLnZpc2libGUpIHtcbiAgICAgICAgJHBhcmVudC5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndXBwZXJMZXZlbCc6ICR1cHBlckxldmVsIH0sIHRoaXMuaGlkZVBhcmVudEVuZCk7XG4gICAgICB9XG4gICAgICAvLyBpZiB0aGUgY3VycmVudCBub2RlIGhhcyB0aGUgcGFyZW50IG5vZGUsIGhpZGUgaXQgcmVjdXJzaXZlbHlcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkcGFyZW50LCAncGFyZW50JykudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVQYXJlbnQoJHBhcmVudCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzaG93UGFyZW50RW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgICQoZXZlbnQudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIHN1cGVyaW9yIGxldmVsXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBsaW5lXG4gICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbigpLnNsaWNlKDEsIC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBzaG93IHBhcmVudCBub2RlIHdpdGggYW5pbWF0aW9uXG4gICAgICB2YXIgJHBhcmVudCA9ICR1cHBlckxldmVsLmVxKDApLmZpbmQoJy5ub2RlJyk7XG4gICAgICB0aGlzLnJlcGFpbnQoJHBhcmVudFswXSk7XG4gICAgICAkcGFyZW50LmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUgfSwgdGhpcy5zaG93UGFyZW50RW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgc3RvcEFqYXg6IGZ1bmN0aW9uICgkbm9kZUxldmVsKSB7XG4gICAgICBpZiAoJG5vZGVMZXZlbC5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZUxldmVsLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGlzVmlzaWJsZU5vZGU6IGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZVN0YXRlKCQoZWxlbSkpLnZpc2libGU7XG4gICAgfSxcbiAgICAvL1xuICAgIGhpZGVDaGlsZHJlbkVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5kYXRhLnZpc2libGVOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgaWYgKGV2ZW50LmRhdGEuaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgZXZlbnQuZGF0YS5sb3dlckxldmVsLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50LmRhdGEudmlzaWJsZU5vZGVzLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5wcmV2QWxsKCcubGluZXMnKS5yZW1vdmVBdHRyKCdzdHlsZScpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgIC5zaWJsaW5ncygnLm5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwubGFzdCgpLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbihldmVudC5kYXRhLm5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdyhldmVudC5kYXRhLm5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICRsb3dlckxldmVsID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgdGhpcy5zdG9wQWpheCgkbG93ZXJMZXZlbC5sYXN0KCkpO1xuICAgICAgdmFyICR2aXNpYmxlTm9kZXMgPSAkbG93ZXJMZXZlbC5sYXN0KCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJGxvd2VyTGV2ZWwubGFzdCgpLmlzKCcudmVydGljYWxOb2RlcycpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgaWYgKCFpc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICAkdmlzaWJsZU5vZGVzLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlcGFpbnQoJHZpc2libGVOb2Rlcy5nZXQoMCkpO1xuICAgICAgJHZpc2libGVOb2Rlcy5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3Zpc2libGVOb2Rlcyc6ICR2aXNpYmxlTm9kZXMsICdsb3dlckxldmVsJzogJGxvd2VyTGV2ZWwsICdpc1ZlcnRpY2FsRGVzYyc6IGlzVmVydGljYWxEZXNjLCAnbm9kZSc6ICRub2RlIH0sIHRoaXMuaGlkZUNoaWxkcmVuRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd0NoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbGV2ZWxzID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJGxldmVscy5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIHZhciAkZGVzY2VuZGFudHMgPSBpc1ZlcnRpY2FsRGVzY1xuICAgICAgICA/ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKVxuICAgICAgICA6ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmVxKDIpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xuICAgICAgLy8gdGhlIHR3byBmb2xsb3dpbmcgc3RhdGVtZW50cyBhcmUgdXNlZCB0byBlbmZvcmNlIGJyb3dzZXIgdG8gcmVwYWludFxuICAgICAgdGhpcy5yZXBhaW50KCRkZXNjZW5kYW50cy5nZXQoMCkpO1xuICAgICAgJGRlc2NlbmRhbnRzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRkZXNjZW5kYW50cy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBoaWRlU2libGluZ3NFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gZXZlbnQuZGF0YS5ub2RlQ29udGFpbmVyO1xuICAgICAgdmFyIGRpcmVjdGlvbiA9IGV2ZW50LmRhdGEuZGlyZWN0aW9uO1xuICAgICAgZXZlbnQuZGF0YS5saW5lcy5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgdmFyICRzaWJsaW5ncyA9IGRpcmVjdGlvbiA/IChkaXJlY3Rpb24gPT09ICdsZWZ0JyA/ICRub2RlQ29udGFpbmVyLnByZXZBbGwoJzpub3QoLmhpZGRlbiknKSA6ICRub2RlQ29udGFpbmVyLm5leHRBbGwoJzpub3QoLmhpZGRlbiknKSkgOiAkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpO1xuICAgICAgJG5vZGVDb250YWluZXIuY2xvc2VzdCgnLm5vZGVzJykucHJldigpLmNoaWxkcmVuKCc6bm90KC5oaWRkZW4pJylcbiAgICAgICAgLnNsaWNlKDEsIGRpcmVjdGlvbiA/ICRzaWJsaW5ncy5sZW5ndGggKiAyICsgMSA6IC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICBldmVudC5kYXRhLmFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTpndCgwKScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSlcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGlkZS1sZWZ0IHNsaWRlLXJpZ2h0JykuYWRkQ2xhc3MoJ3NsaWRlLXVwJyk7XG4gICAgICAkc2libGluZ3MuZmluZCgnLmxpbmVzLCAubm9kZXMsIC52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgIC5lbmQoKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZVNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcbiAgICAgIGlmICgkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXJpZ2h0Jyk7XG4gICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtbGVmdCcpO1xuICAgICAgfVxuICAgICAgdmFyICRhbmltYXRlZE5vZGVzID0gJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc2xpZGluZycpO1xuICAgICAgdmFyICRsaW5lcyA9ICRhbmltYXRlZE5vZGVzLmNsb3Nlc3QoJy5ub2RlcycpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICRhbmltYXRlZE5vZGVzLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ25vZGUnOiAkbm9kZSwgJ25vZGVDb250YWluZXInOiAkbm9kZUNvbnRhaW5lciwgJ2RpcmVjdGlvbic6IGRpcmVjdGlvbiwgJ2FuaW1hdGVkTm9kZXMnOiAkYW5pbWF0ZWROb2RlcywgJ2xpbmVzJzogJGxpbmVzIH0sIHRoaXMuaGlkZVNpYmxpbmdzRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzaG93U2libGluZ3NFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xuICAgICAgZXZlbnQuZGF0YS52aXNpYmxlTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIC8vIGZpcnN0bHksIHNob3cgdGhlIHNpYmxpbmcgdGQgdGFnc1xuICAgICAgdmFyICRzaWJsaW5ncyA9ICQoKTtcbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dEFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHNlY29uZGx5LCBzaG93IHRoZSBsaW5lc1xuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykuc2xpY2UoMCwgJHNpYmxpbmdzLmxlbmd0aCAqIDIpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgLy8gdGhpcmRseSwgZG8gc29tZSBjbGVhbmluZyBzdHVmZlxuICAgICAgaWYgKCF0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB2YXIgcGFyZW50ID0gJHVwcGVyTGV2ZWwuZmluZCgnLm5vZGUnKVswXTtcbiAgICAgICAgdGhpcy5yZXBhaW50KHBhcmVudCk7XG4gICAgICAgICQocGFyZW50KS5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGxhc3RseSwgc2hvdyB0aGUgc2libGluZyBub2RlcyB3aXRoIGFuaW1hdGlvblxuICAgICAgdmFyICR2aXNpYmxlTm9kZXMgPSAkc2libGluZ3MuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5yZXBhaW50KCR2aXNpYmxlTm9kZXMuZ2V0KDApKTtcbiAgICAgICR2aXNpYmxlTm9kZXMuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpO1xuICAgICAgJHZpc2libGVOb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICd2aXNpYmxlTm9kZXMnOiAkdmlzaWJsZU5vZGVzIH0sIHRoaXMuc2hvd1NpYmxpbmdzRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gICAgc3RhcnRMb2FkaW5nOiBmdW5jdGlvbiAoJGFycm93LCAkbm9kZSwgb3B0aW9ucykge1xuICAgICAgdmFyICRjaGFydCA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpO1xuICAgICAgaWYgKHR5cGVvZiAkY2hhcnQuZGF0YSgnaW5BamF4JykgIT09ICd1bmRlZmluZWQnICYmICRjaGFydC5kYXRhKCdpbkFqYXgnKSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRhcnJvdy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkbm9kZS5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPicpO1xuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5ub3QoJy5zcGlubmVyJykuY3NzKCdvcGFjaXR5JywgMC4yKTtcbiAgICAgICRjaGFydC5kYXRhKCdpbkFqYXgnLCB0cnVlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArIChvcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICAvLyB0ZXJtaW5hdGUgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gICAgZW5kTG9hZGluZzogZnVuY3Rpb24gKCRhcnJvdywgJG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkbm9kZS5jbG9zZXN0KCdkaXYub3JnY2hhcnQnKTtcbiAgICAgICRhcnJvdy5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkbm9kZS5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgJGNoYXJ0LmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArIChvcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9LFxuICAgIC8vIHdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyBvdmVyIHRoZSBub2RlXG4gICAgaXNJbkFjdGlvbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICByZXR1cm4gJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykuYXR0cignY2xhc3MnKS5pbmRleE9mKCdmYS0nKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG4gICAgLy9cbiAgICBzd2l0Y2hWZXJ0aWNhbEFycm93OiBmdW5jdGlvbiAoJGFycm93KSB7XG4gICAgICAkYXJyb3cudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaEhvcml6b250YWxBcnJvdzogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgb3B0cyA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCAmJiAodHlwZW9mIG9wdHMuYWpheFVSTCA9PT0gJ3VuZGVmaW5lZCcgfHwgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnKSkpIHtcbiAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgIGlmICgkcHJldlNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICBpZiAoJG5leHRTaWIubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgJHNpYnMgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIHZhciBzaWJzVmlzaWJsZSA9ICRzaWJzLmxlbmd0aCA/ICEkc2licy5pcygnLmhpZGRlbicpIDogZmFsc2U7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgcmVwYWludDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUuc3R5bGUub2Zmc2V0V2lkdGggPSBub2RlLm9mZnNldFdpZHRoO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gY3JlYXRlIG5vZGVcbiAgICBjcmVhdGVOb2RlOiBmdW5jdGlvbiAobm9kZURhdGEsIGxldmVsLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBpZiAoIW5vZGVEYXRhLmNoaWxkcmVuKSB7IG5vZGVEYXRhLmNoaWxkcmVuID0gW107IH1cbiAgICAgICQuZWFjaChub2RlRGF0YS5jaGlsZHJlbiwgZnVuY3Rpb24gKGluZGV4LCBjaGlsZCkge1xuICAgICAgICBjaGlsZC5wYXJlbnRJZCA9IG5vZGVEYXRhLmlkO1xuICAgICAgfSk7XG4gICAgICB2YXIgZHRkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgLy8gY29uc3RydWN0IHRoZSBjb250ZW50IG9mIG5vZGVcbiAgICAgIHZhciAkbm9kZURpdiA9ICQoJzxkaXYnICsgKG9wdHMuZHJhZ2dhYmxlID8gJyBkcmFnZ2FibGU9XCJ0cnVlXCInIDogJycpICsgKG5vZGVEYXRhW29wdHMubm9kZUlkXSA/ICcgaWQ9XCInICsgbm9kZURhdGFbb3B0cy5ub2RlSWRdICsgJ1wiJyA6ICcnKSArIChub2RlRGF0YS5wYXJlbnRJZCA/ICcgZGF0YS1wYXJlbnQ9XCInICsgbm9kZURhdGEucGFyZW50SWQgKyAnXCInIDogJycpICsgJz4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ25vZGUgJyArIChub2RlRGF0YS5jbGFzc05hbWUgfHwgJycpICsgIChsZXZlbCA+PSBvcHRzLmRlcHRoID8gJyBzbGlkZS11cCcgOiAnJykpO1xuICAgICAgaWYgKG9wdHMubm9kZVRlbXBsYXRlKSB7XG4gICAgICAgICRub2RlRGl2LmFwcGVuZChvcHRzLm5vZGVUZW1wbGF0ZShub2RlRGF0YSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8ZGl2IGNsYXNzPVwidGl0bGVcIj4nICsgbm9kZURhdGFbb3B0cy5ub2RlVGl0bGVdICsgJzwvZGl2PicpXG4gICAgICAgICAgLmFwcGVuZCh0eXBlb2Ygb3B0cy5ub2RlQ29udGVudCAhPT0gJ3VuZGVmaW5lZCcgPyAnPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4nICsgKG5vZGVEYXRhW29wdHMubm9kZUNvbnRlbnRdIHx8ICcnKSArICc8L2Rpdj4nIDogJycpO1xuICAgICAgfVxuICAgICAgLy8gYXBwZW5kIDQgZGlyZWN0aW9uIGFycm93cyBvciBleHBhbmQvY29sbGFwc2UgYnV0dG9uc1xuICAgICAgdmFyIGZsYWdzID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcnO1xuICAgICAgaWYgKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICBpZiAoKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcbiAgICAgICAgICB2YXIgaWNvbiA9IGxldmVsICsgMSAgPj0gb3B0cy5kZXB0aCA/ICdwbHVzJyA6ICdtaW51cyc7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cInRvZ2dsZUJ0biBmYSBmYS0nICsgaWNvbiArICctc3F1YXJlXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigwLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMSwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+JyArXG4gICAgICAgICAgICAnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRub2RlRGl2Lm9uKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgJG5vZGUgPSAkKHRoaXMpLCBmbGFnID0gZmFsc2U7XG4gICAgICAgIHZhciAkdG9wRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpO1xuICAgICAgICB2YXIgJHJpZ2h0RWRnZSA9ICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJyk7XG4gICAgICAgIHZhciAkYm90dG9tRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpO1xuICAgICAgICB2YXIgJGxlZnRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpO1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKSB7XG4gICAgICAgICAgaWYgKCR0b3BFZGdlLmxlbmd0aCkge1xuICAgICAgICAgICAgZmxhZyA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgICAgICAgICR0b3BFZGdlLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nLCBmbGFnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCRib3R0b21FZGdlLmxlbmd0aCkge1xuICAgICAgICAgICAgZmxhZyA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKS52aXNpYmxlO1xuICAgICAgICAgICAgJGJvdHRvbUVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsIGZsYWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoJGxlZnRFZGdlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCBmYS1jaGV2cm9uLWRvd24gZmEtY2hldnJvbi1yaWdodCBmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGRlZmluZSBjbGljayBldmVudCBoYW5kbGVyXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmZpbmQoJy5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGRlZmluZSBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgdG9wIGVkZ2VcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9wRWRnZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJG5vZGUgPSAkdGhhdC5wYXJlbnQoKTtcbiAgICAgICAgdmFyIHBhcmVudFN0YXRlID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKTtcbiAgICAgICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XG4gICAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpmaXJzdCcpLmZpbmQoJy5ub2RlJyk7XG4gICAgICAgICAgaWYgKCRwYXJlbnQuaXMoJy5zbGlkaW5nJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgLy8gaGlkZSB0aGUgYW5jZXN0b3Igbm9kZXMgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICAgICAgaWYgKHBhcmVudFN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoYXQuaGlkZVBhcmVudCgkbm9kZSk7XG4gICAgICAgICAgICAkcGFyZW50Lm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc3dpdGNoVmVydGljYWxBcnJvdygkdGhhdCk7XG4gICAgICAgICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBhbmNlc3RvcnMgYW5kIHNpYmxpbmdzXG4gICAgICAgICAgICB0aGF0LnNob3dQYXJlbnQoJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBsb2FkIHRoZSBuZXcgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICAgIHZhciBub2RlSWQgPSAkdGhhdC5wYXJlbnQoKVswXS5pZDtcbiAgICAgICAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1c1xuICAgICAgICAgIGlmICh0aGF0LnN0YXJ0TG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpKSB7XG4gICAgICAgICAgLy8gbG9hZCBuZXcgbm9kZXNcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnBhcmVudCkgPyBvcHRzLmFqYXhVUkwucGFyZW50KG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5wYXJlbnQgKyBub2RlSWQsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICBpZiAoJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRQYXJlbnQoJG5vZGUsIGRhdGEsIG9wdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCBwYXJlbnQgbm9kZSBkYXRhJyk7IH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkgeyB0aGF0LmVuZExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKTsgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gYmluZCBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgYm90dG9tIGVkZ2VcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcuYm90dG9tRWRnZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJG5vZGUgPSAkdGhhdC5wYXJlbnQoKTtcbiAgICAgICAgdmFyIGNoaWxkcmVuU3RhdGUgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJyk7XG4gICAgICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XG4gICAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpsYXN0Jyk7XG4gICAgICAgICAgaWYgKCRjaGlsZHJlbi5maW5kKCcuc2xpZGluZycpLmxlbmd0aCkgeyByZXR1cm47IH1cbiAgICAgICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoYXQuaGlkZUNoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJHRoYXQucGFyZW50KClbMF0uaWQ7XG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmNoaWxkcmVuKSA/IG9wdHMuYWpheFVSTC5jaGlsZHJlbihub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gKyBub2RlSWQsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgaWYgKCRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKCRub2RlLCBkYXRhLCAkLmV4dGVuZCh7fSwgb3B0cywgeyBkZXB0aDogMCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IGNoaWxkcmVuIG5vZGVzIGRhdGEnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aGF0LmVuZExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGV2ZW50IGhhbmRsZXIgZm9yIHRvZ2dsZSBidXR0b25zIGluIEh5YnJpZChob3Jpem9udGFsICsgdmVydGljYWwpIE9yZ0NoYXJ0XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvZ2dsZUJ0bicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkZGVzY1dyYXBwZXIgPSAkdGhpcy5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgIHZhciAkZGVzY2VuZGFudHMgPSAkZGVzY1dyYXBwZXIuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRkZXNjV3JhcHBlci5jaGlsZHJlbigpLmNoaWxkcmVuKCcubm9kZScpO1xuICAgICAgICBpZiAoJGNoaWxkcmVuLmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxuICAgICAgICAkdGhpcy50b2dnbGVDbGFzcygnZmEtcGx1cy1zcXVhcmUgZmEtbWludXMtc3F1YXJlJyk7XG4gICAgICAgIGlmICgkZGVzY2VuZGFudHMuZXEoMCkuaXMoJy5zbGlkZS11cCcpKSB7XG4gICAgICAgICAgJGRlc2NXcmFwcGVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0LnJlcGFpbnQoJGNoaWxkcmVuLmdldCgwKSk7XG4gICAgICAgICAgJGNoaWxkcmVuLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkY2hpbGRyZW4ucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkZGVzY2VuZGFudHMuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRkZXNjZW5kYW50cy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICAgICAgLy8gJGRlc2NXcmFwcGVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICRkZXNjZW5kYW50cy5jbG9zZXN0KCd1bCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkZGVzY2VuZGFudHMuZmluZCgnLnRvZ2dsZUJ0bicpLnJlbW92ZUNsYXNzKCdmYS1taW51cy1zcXVhcmUnKS5hZGRDbGFzcygnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGxlZnQgYW5kIHJpZ2h0IGVkZ2VzXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmxlZnRFZGdlLCAucmlnaHRFZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgc2libGluZ3NTdGF0ZSA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKTtcbiAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICAgIGlmICgkc2libGluZ3MuZmluZCgnLnNsaWRpbmcnKS5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwKSB7XG4gICAgICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcbiAgICAgICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICAgICAgaWYgKCR0aGF0LmlzKCcubGVmdEVkZ2UnKSkge1xuICAgICAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoYXQuaGlkZVNpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LmhpZGVTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgICB0aGF0LmhpZGVTaWJsaW5ncygkbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGxvYWQgdGhlIG5ldyBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJHRoYXQucGFyZW50KClbMF0uaWQ7XG4gICAgICAgICAgdmFyIHVybCA9ICh0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLmV4aXN0KSA/XG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5zaWJsaW5ncykgPyBvcHRzLmFqYXhVUkwuc2libGluZ3Mobm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnNpYmxpbmdzICsgbm9kZUlkKSA6XG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5mYW1pbGllcykgPyBvcHRzLmFqYXhVUkwuZmFtaWxpZXMobm9kZURhdGEpIDogb3B0cy5hamF4VVJMLmZhbWlsaWVzICsgbm9kZUlkKTtcbiAgICAgICAgICBpZiAodGhhdC5zdGFydExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKSkge1xuICAgICAgICAgICAgJC5hamF4KHsgJ3VybCc6IHVybCwgJ2RhdGFUeXBlJzogJ2pzb24nIH0pXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgICAgICBpZiAoJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zaWJsaW5ncyB8fCBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZFNpYmxpbmdzKCRub2RlLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBnZXQgc2libGluZyBub2RlcyBkYXRhJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhhdC5lbmRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdHMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICRub2RlRGl2Lm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciBvcmlnRXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgIHZhciBpc0ZpcmVmb3ggPSAvZmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsICdoYWNrIGZvciBmaXJlZm94Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGlmIHVzZXJzIGVuYWJsZSB6b29tIG9yIGRpcmVjdGlvbiBvcHRpb25zXG4gICAgICAgICAgaWYgKCRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykgIT09ICdub25lJykge1xuICAgICAgICAgICAgdmFyIGdob3N0Tm9kZSwgbm9kZUNvdmVyO1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGUuY2xhc3NMaXN0LmFkZCgnZ2hvc3Qtbm9kZScpO1xuICAgICAgICAgICAgICBub2RlQ292ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvdmVyKTtcbiAgICAgICAgICAgICAgJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuYXBwZW5kKGdob3N0Tm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBnaG9zdE5vZGUgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jaGlsZHJlbignLmdob3N0LW5vZGUnKS5nZXQoMCk7XG4gICAgICAgICAgICAgIG5vZGVDb3ZlciA9ICQoZ2hvc3ROb2RlKS5jaGlsZHJlbigpLmdldCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc1ZhbHVlcyA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/IHRyYW5zVmFsdWVzWzBdLnNsaWNlKHRyYW5zVmFsdWVzWzBdLmluZGV4T2YoJygnKSArIDEpIDogdHJhbnNWYWx1ZXNbMV0pKTtcbiAgICAgICAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkpO1xuICAgICAgICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLDUgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5Jyw1ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAxMjAgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCA0MCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J4JywgNCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J5JywgNCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIDEgKiBzY2FsZSk7XG4gICAgICAgICAgICB2YXIgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICB2YXIgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdsMnInKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcbiAgICAgICAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgICAgeU9mZnNldCA9ICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNGaXJlZm94KSB7IC8vIGhhY2sgZm9yIG9sZCB2ZXJzaW9uIG9mIEZpcmVmb3goPCA0OC4wKVxuICAgICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xuICAgICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcbiAgICAgICAgICAgICAgdmFyIGdob3N0Tm9kZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlV3JhcHBlci5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJyArIChuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhnaG9zdE5vZGUpO1xuICAgICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGVXcmFwcGVyLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZSwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciAkZHJhZ2dlZCA9ICQodGhpcyk7XG4gICAgICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICB2YXIgJGRyYWdIaWVyID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5maW5kKCcubm9kZScpO1xuICAgICAgICAgICRkcmFnZ2VkLmNsb3Nlc3QoJy5vcmdjaGFydCcpXG4gICAgICAgICAgICAuZGF0YSgnZHJhZ2dlZCcsICRkcmFnZ2VkKVxuICAgICAgICAgICAgLmZpbmQoJy5ub2RlJykuZWFjaChmdW5jdGlvbihpbmRleCwgbm9kZSkge1xuICAgICAgICAgICAgICBpZiAoJGRyYWdIaWVyLmluZGV4KG5vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKCRkcmFnZ2VkLCAkZHJhZ1pvbmUsICQobm9kZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoISQodGhpcykuaXMoJy5hbGxvd2VkRHJvcCcpKSB7XG4gICAgICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmZpbmQoJy5hbGxvd2VkRHJvcCcpLnJlbW92ZUNsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciAkZHJvcFpvbmUgPSAkKHRoaXMpO1xuICAgICAgICAgIHZhciAkb3JnY2hhcnQgPSAkZHJvcFpvbmUuY2xvc2VzdCgnLm9yZ2NoYXJ0Jyk7XG4gICAgICAgICAgdmFyICRkcmFnZ2VkID0gJG9yZ2NoYXJ0LmRhdGEoJ2RyYWdnZWQnKTtcbiAgICAgICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5jaGlsZHJlbigpO1xuICAgICAgICAgIHZhciBkcm9wRXZlbnQgPSAkLkV2ZW50KCdub2RlZHJvcC5vcmdjaGFydCcpO1xuICAgICAgICAgICRvcmdjaGFydC50cmlnZ2VyKGRyb3BFdmVudCwgeyAnZHJhZ2dlZE5vZGUnOiAkZHJhZ2dlZCwgJ2RyYWdab25lJzogJGRyYWdab25lLmNoaWxkcmVuKCksICdkcm9wWm9uZSc6ICRkcm9wWm9uZSB9KTtcbiAgICAgICAgICBpZiAoZHJvcEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxuICAgICAgICAgIGlmICghJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5sZW5ndGgpIHsgLy8gaWYgdGhlIGRyb3Agem9uZSBpcyBhIGxlYWYgbm9kZVxuICAgICAgICAgICAgJGRyb3Bab25lLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJywgMilcbiAgICAgICAgICAgICAgLnBhcmVudCgpLmFmdGVyKCc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nXG4gICAgICAgICAgICAgICsgJzx0ciBjbGFzcz1cImxpbmVzXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+PC90cj4nXG4gICAgICAgICAgICAgICsgJzx0ciBjbGFzcz1cIm5vZGVzXCI+PC90cj4nKVxuICAgICAgICAgICAgICAuc2libGluZ3MoJzpsYXN0JykuYXBwZW5kKCRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpLmVuZCgpLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZHJvcENvbHNwYW4gPSBwYXJzZUludCgkZHJvcFpvbmUucGFyZW50KCkuYXR0cignY29sc3BhbicpKSArIDI7XG4gICAgICAgICAgICB2YXIgaG9yaXpvbnRhbEVkZ2VzID0gJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPic7XG4gICAgICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5uZXh0KCkuYWRkQmFjaygpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgICAgICAgIGlmICghJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRkcmFnZ2VkLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgxKS5jaGlsZHJlbignOmxhc3QnKS5iZWZvcmUoJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD4nKVxuICAgICAgICAgICAgICAuZW5kKCkubmV4dCgpLmFwcGVuZCgkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgICAgICAgIHZhciAkZHJvcFNpYnMgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICAgIGlmICgkZHJvcFNpYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICRkcm9wU2licy5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2Vjb25kbHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyYWdnZWQgbm9kZVxuICAgICAgICAgIHZhciBkcmFnQ29sc3BhbiA9IHBhcnNlSW50KCRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJykpO1xuICAgICAgICAgIGlmIChkcmFnQ29sc3BhbiA+IDIpIHtcbiAgICAgICAgICAgICRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxuICAgICAgICAgICAgICAucGFyZW50KCkubmV4dCgpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbigpLnNsaWNlKDEsIDMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyICRkcmFnU2licyA9ICRkcmFnWm9uZS5wYXJlbnQoKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICAgICAgaWYgKCRkcmFnU2licy5sZW5ndGggPT09MSkge1xuICAgICAgICAgICAgICAkZHJhZ1NpYnMuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRkcmFnWm9uZS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGFsbG93IHVzZXIgdG8gYXBwZW5kIGRvbSBtb2RpZmljYXRpb24gYWZ0ZXIgZmluaXNoaW5nIG5vZGUgY3JlYXRlIG9mIG9yZ2NoYXJ0XG4gICAgICBpZiAob3B0cy5jcmVhdGVOb2RlKSB7XG4gICAgICAgIG9wdHMuY3JlYXRlTm9kZSgkbm9kZURpdiwgbm9kZURhdGEpO1xuICAgICAgfVxuICAgICAgZHRkLnJlc29sdmUoJG5vZGVEaXYpO1xuICAgICAgcmV0dXJuIGR0ZC5wcm9taXNlKCk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBidWlsZCB0aGUgdHJlZVxuICAgIGJ1aWxkSGllcmFyY2h5OiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJG5vZGVXcmFwcGVyO1xuICAgICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXG4gICAgICB2YXIgJGNoaWxkTm9kZXMgPSBub2RlRGF0YS5jaGlsZHJlbjtcbiAgICAgIHZhciBoYXNDaGlsZHJlbiA9ICRjaGlsZE5vZGVzID8gJGNoaWxkTm9kZXMubGVuZ3RoIDogZmFsc2U7XG4gICAgICB2YXIgaXNWZXJ0aWNhbE5vZGUgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA+IDEpIHsgLy8gaWYgbm9kZURhdGEgaGFzIG5lc3RlZCBzdHJ1Y3R1cmVcbiAgICAgICAgJG5vZGVXcmFwcGVyID0gaXNWZXJ0aWNhbE5vZGUgPyAkYXBwZW5kVG8gOiAkKCc8dGFibGU+Jyk7XG4gICAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAkYXBwZW5kVG8uYXBwZW5kKCRub2RlV3JhcHBlcik7XG4gICAgICAgIH1cbiAgICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwsIG9wdHMpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdik7XG4gICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdi53cmFwKCc8dHI+PHRkJyArIChoYXNDaGlsZHJlbiA/ICcgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiJyA6ICcnKSArICc+PC90ZD48L3RyPicpLmNsb3Nlc3QoJ3RyJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0IG5vZGUnKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXG4gICAgICBpZiAoaGFzQ2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPT09IDEpIHsgLy8gaWYgbm9kZURhdGEgaXMganVzdCBhbiBhcnJheVxuICAgICAgICAgICRub2RlV3JhcHBlciA9ICRhcHBlbmRUbztcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNIaWRkZW4gPSAobGV2ZWwgKyAxID49IG9wdHMuZGVwdGggfHwgbm9kZURhdGEuY29sbGFwc2VkKSA/ICcgaGlkZGVuJyA6ICcnO1xuICAgICAgICB2YXIgaXNWZXJ0aWNhbExheWVyID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIC8vIGRyYXcgdGhlIGxpbmUgY2xvc2UgdG8gcGFyZW50IG5vZGVcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xuICAgICAgICB2YXIgbGluZUxheWVyID0gJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgZm9yICh2YXIgaT0xOyBpPCRjaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgfVxuICAgICAgICBsaW5lTGF5ZXIgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD48L3RyPic7XG4gICAgICAgIHZhciAkbm9kZUxheWVyO1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx1bD4nKTtcbiAgICAgICAgICBpZiAoaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICRub2RlTGF5ZXIuYWRkQ2xhc3MoaXNIaWRkZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobGV2ZWwgKyAyID09PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJzx0ciBjbGFzcz1cInZlcnRpY2FsTm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkPjwvdGQ+PC90cj4nKVxuICAgICAgICAgICAgICAuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5jaGlsZHJlbigpLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx0ciBjbGFzcz1cIm5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPicpO1xuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQobGluZUxheWVyKS5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVjdXJzZSB0aHJvdWdoIGNoaWxkcmVuIG5vZGVzXG4gICAgICAgICQuZWFjaCgkY2hpbGROb2RlcywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyICRub2RlQ2VsbCA9IGlzVmVydGljYWxMYXllciA/ICQoJzxsaT4nKSA6ICQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpO1xuICAgICAgICAgICRub2RlTGF5ZXIuYXBwZW5kKCRub2RlQ2VsbCk7XG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkbm9kZUNlbGwsIHRoaXMsIGxldmVsICsgMSwgb3B0cywgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBjaGlsZCBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRDaGlsZE5vZGU6IGZ1bmN0aW9uICgkYXBwZW5kVG8sIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRhcHBlbmRUby5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgZGF0YSA9IG5vZGVEYXRhLmNoaWxkcmVuIHx8IG5vZGVEYXRhLnNpYmxpbmdzO1xuICAgICAgJGFwcGVuZFRvLmZpbmQoJ3RkOmZpcnN0JykuYXR0cignY29sc3BhbicsIGRhdGEubGVuZ3RoICogMik7XG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRhcHBlbmRUbywgeyAnY2hpbGRyZW4nOiBkYXRhIH0sIDAsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXG4gICAgYWRkQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoKytjb3VudCA9PT0gZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgJG5vZGUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghJG5vZGUuZmluZCgnLnN5bWJvbCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoYXQuc2hvd0NoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgcGFyZW50IG5vZGUgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkUGFyZW50Tm9kZTogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRhYmxlID0gJCgnPHRhYmxlPicpO1xuICAgICAgbm9kZURhdGEucmVsYXRpb25zaGlwID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcwMDEnO1xuICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgMCwgb3B0cyB8fCAkY3VycmVudFJvb3QuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpKSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCRub2RlRGl2LnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmFkZENsYXNzKCdzbGlkZS1kb3duJykud3JhcCgnPHRyIGNsYXNzPVwiaGlkZGVuXCI+PHRkIGNvbHNwYW49XCIyXCI+PC90ZD48L3RyPicpLmNsb3Nlc3QoJ3RyJykpO1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgICB2YXIgbGluZXNSb3cgPSAnPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj4nICsgbGluZXNSb3cgKyAnPC90cj4nKTtcbiAgICAgICAgICB2YXIgJGNoYXJ0ID0gdGhhdC4kY2hhcnQ7XG4gICAgICAgICAgJGNoYXJ0LnByZXBlbmQoJHRhYmxlKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0YWJsZTpmaXJzdCcpLmFwcGVuZCgnPHRyIGNsYXNzPVwibm9kZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48L3RkPjwvdHI+JylcbiAgICAgICAgICAgIC5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCkuYXBwZW5kKCRjaGFydC5jaGlsZHJlbigndGFibGUnKS5sYXN0KCkpO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY3JlYXRlIHBhcmVudCBub2RlJyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcbiAgICBhZGRQYXJlbnQ6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuYnVpbGRQYXJlbnROb2RlKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudG9wRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRjdXJyZW50Um9vdC5jaGlsZHJlbignLnRpdGxlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dQYXJlbnQoJGN1cnJlbnRSb290KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc3Vic2VxdWVudCBwcm9jZXNzaW5nIG9mIGJ1aWxkIHNpYmxpbmcgbm9kZXNcbiAgICBjb21wbGVtZW50TGluZTogZnVuY3Rpb24gKCRvbmVTaWJsaW5nLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpIHtcbiAgICAgIHZhciBsaW5lcyA9ICcnO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGlzdGluZ1NpYmxpZ0NvdW50OyBpKyspIHtcbiAgICAgICAgbGluZXMgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD4nO1xuICAgICAgfVxuICAgICAgJG9uZVNpYmxpbmcucGFyZW50KCkucHJldkFsbCgndHI6Z3QoMCknKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKVxuICAgICAgICAuZW5kKCkubmV4dCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5hZnRlcihsaW5lcyk7XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRTaWJsaW5nTm9kZTogZnVuY3Rpb24gKCRub2RlQ2hhcnQsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIG5ld1NpYmxpbmdDb3VudCA9IG5vZGVEYXRhLnNpYmxpbmdzID8gbm9kZURhdGEuc2libGluZ3MubGVuZ3RoIDogbm9kZURhdGEuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgdmFyIGV4aXN0aW5nU2libGlnQ291bnQgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpID8gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLmNoaWxkcmVuKCkubGVuZ3RoIDogMTtcbiAgICAgIHZhciBzaWJsaW5nQ291bnQgPSBleGlzdGluZ1NpYmxpZ0NvdW50ICsgbmV3U2libGluZ0NvdW50O1xuICAgICAgdmFyIGluc2VydFBvc3Rpb24gPSAoc2libGluZ0NvdW50ID4gMSkgPyBNYXRoLmZsb29yKHNpYmxpbmdDb3VudC8yIC0gMSkgOiAwO1xuICAgICAgLy8ganVzdCBidWlsZCB0aGUgc2libGluZyBub2RlcyBmb3IgdGhlIHNwZWNpZmljIG5vZGVcbiAgICAgIGlmICgkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpKSB7XG4gICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmxhc3QnKTtcbiAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmx0KDIpJykucmVtb3ZlKCk7XG4gICAgICAgIHZhciBjaGlsZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5idWlsZENoaWxkTm9kZSgkbm9kZUNoYXJ0LnBhcmVudCgpLmNsb3Nlc3QoJ3RhYmxlJyksIG5vZGVEYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoKytjaGlsZENvdW50ID09PSBuZXdTaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICAgIHZhciAkc2libGluZ1RkcyA9ICRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKS5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCd0ZCcpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2libGlnQ291bnQgPiAxKSB7XG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoMCkuYmVmb3JlKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS5zaWJsaW5ncygpLmFkZEJhY2soKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCk7XG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgMSk7XG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLm5vdCgnOmVxKCcgKyBpbnNlcnRQb3N0aW9uICsgMSArICcpJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcbiAgICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHsgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgYW5kIHBhcmVudCBub2RlIGZvciB0aGUgc3BlY2lmaWMgbmRvZVxuICAgICAgICB2YXIgbm9kZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLCBub2RlRGF0YSwgMCwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrbm9kZUNvdW50ID09PSBzaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJG5vZGVDaGFydC5uZXh0KCkuY2hpbGRyZW4oJ3RyOmxhc3QnKVxuICAgICAgICAgICAgICAuY2hpbGRyZW4oKS5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKVxuICAgICAgICAgICAgICAuYXBwZW5kKCRub2RlQ2hhcnQpKSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDApLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1kb3duJyk7XG4gICAgICAgICAgICAkbm9kZUNoYXJ0LnBhcmVudCgpLnNpYmxpbmdzKCkuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXG4gICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGFkZFNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuYnVpbGRTaWJsaW5nTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnLCB0cnVlKTtcbiAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICByZW1vdmVOb2RlczogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICB2YXIgJHNpYnMgPSAkcGFyZW50LnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoJHBhcmVudC5pcygndGQnKSkge1xuICAgICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLmV4aXN0KSB7XG4gICAgICAgICAgJHNpYnMuZXEoMikuY2hpbGRyZW4oJy50b3BMaW5lOmx0KDIpJykucmVtb3ZlKCk7XG4gICAgICAgICAgJHNpYnMuc2xpY2UoMCwgMikuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgJHNpYnMuZXEoMikuY2hpbGRyZW4oKS5sZW5ndGgpO1xuICAgICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHNpYnMuZXEoMCkuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXG4gICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2libGluZ3MoKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHBhcmVudC5hZGQoJHBhcmVudC5zaWJsaW5ncygpKS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgZXhwb3J0OiBmdW5jdGlvbiAoZXhwb3J0RmlsZW5hbWUsIGV4cG9ydEZpbGVleHRlbnNpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGV4cG9ydEZpbGVuYW1lID0gKHR5cGVvZiBleHBvcnRGaWxlbmFtZSAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVuYW1lIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVuYW1lO1xuICAgICAgZXhwb3J0RmlsZWV4dGVuc2lvbiA9ICh0eXBlb2YgZXhwb3J0RmlsZWV4dGVuc2lvbiAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVleHRlbnNpb24gOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZWV4dGVuc2lvbjtcbiAgICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XG4gICAgICB2YXIgJG1hc2sgPSAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKTtcbiAgICAgIGlmICghJG1hc2subGVuZ3RoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtYXNrXCI+PGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+PC9kaXY+Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbWFzay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICB2YXIgc291cmNlQ2hhcnQgPSAkY2hhcnRDb250YWluZXIuYWRkQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpLmZpbmQoJy5vcmdjaGFydDpub3QoXCIuaGlkZGVuXCIpJykuZ2V0KDApO1xuICAgICAgdmFyIGZsYWcgPSB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAnbDJyJyB8fCB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAncjJsJztcbiAgICAgIGh0bWwyY2FudmFzKHNvdXJjZUNoYXJ0LCB7XG4gICAgICAgICd3aWR0aCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQgOiBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCxcbiAgICAgICAgJ2hlaWdodCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCA6IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCxcbiAgICAgICAgJ29uY2xvbmUnOiBmdW5jdGlvbiAoY2xvbmVEb2MpIHtcbiAgICAgICAgICAkKGNsb25lRG9jKS5maW5kKCcuY2FudmFzQ29udGFpbmVyJykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJylcbiAgICAgICAgICAgIC5maW5kKCcub3JnY2hhcnQ6bm90KFwiLmhpZGRlblwiKTpmaXJzdCcpLmNzcygndHJhbnNmb3JtJywgJycpO1xuICAgICAgICB9LFxuICAgICAgICAnb25yZW5kZXJlZCc6IGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgaWYgKGV4cG9ydEZpbGVleHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ3BkZicpIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB7fTtcbiAgICAgICAgICAgIHZhciBkb2NXaWR0aCA9IE1hdGguZmxvb3IoY2FudmFzLndpZHRoICogMC4yNjQ2KTtcbiAgICAgICAgICAgIHZhciBkb2NIZWlnaHQgPSBNYXRoLmZsb29yKGNhbnZhcy5oZWlnaHQgKiAwLjI2NDYpO1xuICAgICAgICAgICAgaWYgKGRvY1dpZHRoID4gZG9jSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERignbCcsICdtbScsIFtkb2NXaWR0aCwgZG9jSGVpZ2h0XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ3AnLCAnbW0nLCBbZG9jSGVpZ2h0LCBkb2NXaWR0aF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jLmFkZEltYWdlKGNhbnZhcy50b0RhdGFVUkwoKSwgJ3BuZycsIDAsIDApO1xuICAgICAgICAgICAgZG9jLnNhdmUoZXhwb3J0RmlsZW5hbWUgKyAnLnBkZicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaXNXZWJraXQgPSAnV2Via2l0QXBwZWFyYW5jZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xuICAgICAgICAgICAgdmFyIGlzRmYgPSAhIXdpbmRvdy5zaWRlYmFyO1xuICAgICAgICAgICAgdmFyIGlzRWRnZSA9IG5hdmlnYXRvci5hcHBOYW1lID09PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyB8fCAobmF2aWdhdG9yLmFwcE5hbWUgPT09IFwiTmV0c2NhcGVcIiAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdFZGdlJykgPiAtMSk7XG5cbiAgICAgICAgICAgIGlmICgoIWlzV2Via2l0ICYmICFpc0ZmKSB8fCBpc0VkZ2UpIHtcbiAgICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvci5tc1NhdmVCbG9iKGNhbnZhcy5tc1RvQmxvYigpLCBleHBvcnRGaWxlbmFtZSArICcucG5nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLm9jLWRvd25sb2FkLWJ0bicgKyAodGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgdGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyk7XG4gICAgICAgICAgICAgIGlmICghJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxhIGNsYXNzPVwib2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICdcIidcbiAgICAgICAgICAgICAgICAgICsgJyBkb3dubG9hZD1cIicgKyBleHBvcnRGaWxlbmFtZSArICcucG5nXCI+PC9hPicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5hdHRyKCdocmVmJywgY2FudmFzLnRvRGF0YVVSTCgpKVswXS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkLmZuLm9yZ2NoYXJ0ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IE9yZ0NoYXJ0KHRoaXMsIG9wdHMpLmluaXQoKTtcbiAgfTtcblxufSkpO1xuIl19
